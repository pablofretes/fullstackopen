(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{16:function(e,t,n){e.exports=n(39)},39:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(15),u=n.n(c),o=n(1),l=n.n(o),i=n(4),s=n(2),d=function(e){var t=e.blog,n=e.likeHandler,c=e.deleteHandler,u=Object(a.useState)(!1),o=Object(s.a)(u,2),l=o[0],i=o[1];return r.a.createElement("div",{style:{paddingTop:10,paddingLeft:5,paddingBottom:10,border:"solid",borderWidth:3,marginBottom:5},"data-cy":"blogs"},t.title," By ",r.a.createElement("strong",null,t.author),r.a.createElement("div",null,r.a.createElement("button",{className:"visibility-button","data-cy":"visibility-button",onClick:function(){i(!l)}},l?"hide":"view"),l?r.a.createElement("div",{"data-cy":"show-likes"},r.a.createElement("div",null,r.a.createElement("div",{className:"likes-container","data-cy":"like-container"},t.likes," ",r.a.createElement("button",{className:"like-button","data-cy":"like-button",onClick:function(){return n(t.id,t.likes,t.author,t.title,t.url)}},"Like")),r.a.createElement("p",null,t.url),r.a.createElement("p",null,t.user.username),r.a.createElement("button",{className:"delete-button","data-cy":"delete-button",onClick:function(){return c(t.id,t.title,t.author)}},"Delete"))):""))},p=n(5),m=n.n(p),b=null,f={getAll:function(){return m.a.get("/api/blogs").then((function(e){return e.data}))},create:function(){var e=Object(i.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:b}},e.next=3,m.a.post("/api/blogs",t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){b="bearer ".concat(e)},update:function(){var e=Object(i.a)(l.a.mark((function e(t,n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.put("".concat("/api/blogs","/").concat(t),n);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),deleteBlog:function(){var e=Object(i.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:b}},e.next=3,m.a.delete("".concat("/api/blogs","/").concat(t),n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},g={login:function(){var e=Object(i.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},v=function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement("div",null,"username",r.a.createElement("input",{id:"username-input","data-cy":"username",type:"text",value:e.username,name:"Username",onChange:e.handleChangeUsername}),"password",r.a.createElement("input",{id:"password-input","data-cy":"password",type:"password",value:e.password,name:"Password",onChange:e.handleChangePassword})),r.a.createElement("button",{id:"login-button","data-cy":"login-button",type:"submit"},"Log-in"))},h=function(e){var t=Object(a.useState)(!1),n=Object(s.a)(t,2),c=n[0],u=n[1],o={display:c?"none":""},l={display:c?"":"none"},i=function(){u(!c)};return r.a.createElement("div",null,r.a.createElement("div",{style:o},r.a.createElement("button",{onClick:i},e.buttonLabel)),r.a.createElement("div",{style:l},e.children,r.a.createElement("button",{id:"cancel-button","data-cy":"cancel-button",onClick:i},"Cancel")))},E=function(e){var t=e.newBlog,n=Object(a.useState)(""),c=Object(s.a)(n,2),u=c[0],o=c[1],d=Object(a.useState)(""),p=Object(s.a)(d,2),m=p[0],b=p[1],f=Object(a.useState)(""),g=Object(s.a)(f,2),v=g[0],h=g[1],E=function(){var e=Object(i.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),t({title:u,author:m,url:v}),o(""),b(""),h("");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:E},"Title",r.a.createElement("input",{id:"title","data-cy":"title",type:"text",name:"Title",value:u,onChange:function(e){var t=e.target;return o(t.value)}}),r.a.createElement("br",null),"Author",r.a.createElement("input",{id:"author","data-cy":"author",type:"text",name:"Author",value:m,onChange:function(e){var t=e.target;return b(t.value)}}),r.a.createElement("br",null),"Url",r.a.createElement("input",{id:"url","data-cy":"url",type:"text",name:"Url",value:v,onChange:function(e){var t=e.target;return h(t.value)}}),r.a.createElement("br",null),r.a.createElement("button",{type:"submit","data-cy":"create-button"},"Create")))},w=function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1],u=Object(a.useState)(""),o=Object(s.a)(u,2),p=o[0],m=o[1],b=Object(a.useState)(""),w=Object(s.a)(b,2),y=w[0],k=w[1],O=Object(a.useState)(null),j=Object(s.a)(O,2),x=j[0],S=j[1],C=Object(a.useState)(null),B=Object(s.a)(C,2),A=B[0],U=B[1],L=Object(a.useState)(null),N=Object(s.a)(L,2),T=N[0],D=N[1];Object(a.useEffect)((function(){f.getAll().then((function(e){return c(e)}))}),[T]),Object(a.useEffect)((function(){var e=window.localStorage.getItem("loggedBlogAppUser");if(e){var t=JSON.parse(e);console.log(t),S(t),f.setToken(t.token)}}),[]);var H=function(){var e=Object(i.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,g.login({username:p,password:y});case 4:n=e.sent,window.localStorage.setItem("loggedBlogAppUser",JSON.stringify(n)),f.setToken(n.token),S(n),console.log(n),m(""),k(""),e.next=19;break;case 13:e.prev=13,e.t0=e.catch(1),console.log(p,y),U("Username or Password are incorrect"),setTimeout((function(){U(null)}),5e3),window.localStorage.clear();case 19:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(i.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.create(t);case 2:a=e.sent,c(n.concat(a)),U("A new Blog has been created"),setTimeout((function(){U(null)}),5e3);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(i.a)(l.a.mark((function e(t,n,a,r,c){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.update(t,{likes:n+1,author:a,title:r,url:c});case 2:D(Number(99999999999*Math.random()).toFixed(0));case 3:case"end":return e.stop()}}),e)})));return function(t,n,a,r,c){return e.apply(this,arguments)}}(),P=function(){var e=Object(i.a)(l.a.mark((function e(t,n,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Delete Blog ".concat(n," by ").concat(a,"?"))){e.next=4;break}return e.next=4,f.deleteBlog(t);case 4:D(Number(99999999999*Math.random()).toFixed(0));case 5:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("div",{"data-cy":"error-message"},A),null===x?r.a.createElement(h,{buttonLabel:"Login"},r.a.createElement(v,{username:p,password:y,handleChangeUsername:function(e){var t=e.target;return m(t.value)},handleChangePassword:function(e){var t=e.target;return k(t.value)},handleSubmit:H})):r.a.createElement("div",null,r.a.createElement(h,{buttonLabel:"Create new Blog"},r.a.createElement(E,{newBlog:I,blogService:f,setBlogs:c,blogs:n,setErrorMessage:U})),r.a.createElement("div",null,r.a.createElement("h2",null,"blogs"),n.sort((function(e,t){return t.likes-e.likes}))&&n.map((function(e){return r.a.createElement(d,{key:e.id,blog:e,likeHandler:J,deleteHandler:P})}))),r.a.createElement("h1",null,x.name," logged-in ",r.a.createElement("br",null)," ",x.blogs," "),r.a.createElement("button",{onClick:function(){window.localStorage.removeItem("loggedBlogAppUser")&&S(null)}},"Logout"),r.a.createElement("br",null)))};u.a.render(r.a.createElement(w,null),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.087ec794.chunk.js.map